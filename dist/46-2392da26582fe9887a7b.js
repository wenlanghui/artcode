webpackJsonp([46],{126:function(e,t){e.exports={postBlock:"postBlock___289N6",deletedPost:"deletedPost___29jEr",marginLeft10:"marginLeft10___187xh",checkDiv:"checkDiv___32MNn",radioAndCheck:"radioAndCheck___1BDvU",postContent:"postContent___2wa8u",postInfo:"postInfo___2AFM9",content:"content___2jS2O",listPicture:"listPicture___2iS2s",addPostTip:"addPostTip___1hiRw"}},420:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,i=n(4),l=a(i),d=n(6),s=a(d),u=n(5),c=a(u),f=(n(70),n(69)),p=a(f),m=n(1),h=a(m),y=n(14),g=a(y),_=p.default.RangePicker,v=(r=o=function(e){function t(){(0,l.default)(this,t);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var r=(0,s.default)(this,e.call.apply(e,[this].concat(a)));return r.range=r.props.value||[],r.isChange=!1,r}return(0,c.default)(t,e),t.prototype.handleChange=function(e){2==e.length?this.range=[e[0].startOf("day").format("YYYY-MM-DD HH:mm:ss"),e[1].endOf("day").format("YYYY-MM-DD HH:mm:ss")]:this.range=[],this.isChange=!0},t.prototype.confirm=function(){this.props.onConfirm&&this.props.onConfirm(this.props.columnKey,this.range,this.isChange)},t.prototype.render=function(){var e=this.props.value;return e&&(e=e.map(function(e){return(0,g.default)(e)})),h.default.createElement("div",{className:"ant-table-filter-dropdown"},h.default.createElement("div",{style:{width:225},className:"date-filter-dropdown"},h.default.createElement(_,{defaultValue:e||[],getCalendarContainer:function(){return document.querySelector(".date-filter-dropdown")},onChange:this.handleChange.bind(this)})),h.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},h.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:this.confirm.bind(this)},"\u786e\u5b9a")))},t}(h.default.Component),o.propTypes={columnKey:m.PropTypes.string.isRequired},r);t.default=v,e.exports=t.default},829:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n(93),n(92)),r=a(o),i=(n(11),n(10)),l=a(i),d=(n(30),n(29)),s=a(d),u=(n(128),n(58)),c=a(u),f=n(4),p=a(f),m=n(6),h=a(m),y=n(5),g=a(y),_=n(1),v=a(_),C=n(2),w=a(C),b=n(14),E=a(b),k=n(126),D=a(k),P=n(73),x=n(420),M=a(x),S=function(e){function t(n){(0,p.default)(this,t);var a=(0,h.default)(this,e.call(this,n));return a.reasonMap=["\u8fb1\u9a82","\u5e7f\u544a","\u8272\u60c5","\u654f\u611f","\u5acc\u7591"],a.state={selects:[],updateFiltered:n.location.query.start&&n.location.query.end,filterDropdownVisible:!1},a}return(0,g.default)(t,e),t.prototype.deleteOrRecoverPost=function(e,t){this.context.store.dispatch({type:"posts/deletePostComment",payload:{postId:e.post,commentId:e.comment._id,page:"report",index:t}})},t.prototype.batchDelete=function(){this.context.store.dispatch({type:"posts/batchDeletePostComment",payload:{ids:this.state.selects}})},t.prototype.dateFilter=function(e,t,n){console.log(e,t,n),this.setState({filterDropdownVisible:!1,updateFiltered:2===t.length}),n&&this.props.onPageChange(null,{start:t[0],end:t[1]})},t.prototype.render=function(){var e=this,t=this.props,n=t.dataSource,a=t.pagination,o=t.location,i=o.query.sort,d=o.query.reason,u=[];o.query.start&&o.query.end&&(u=[o.query.start,o.query.end]);var f=[{title:"\u5185\u5bb9",dataIndex:"comment.content",key:"comment.content",width:260},{title:"\u94fe\u63a5",dataIndex:"post",key:"post",width:100,render:function(e,t){return v.default.createElement("div",null,v.default.createElement("a",{href:(0,P.makeUserInfoUrl)(t.comment&&t.comment.author)},"\u4f5c\u8005"),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement("a",{href:(0,P.makePostDetailUrl)(t.comment&&t.comment.post)},"\u5e16\u5b50"))}},{title:"\u4e3e\u62a5\u6b21\u6570",dataIndex:"count",width:100,sorter:!0,sortOrder:!!i&&("count"===i?"ascend":"descend"),key:"count"},{title:"\u7406\u7531",dataIndex:"reason",key:"reason",filters:[{text:"\u5acc\u7591",value:"sus"},{text:"\u975e\u5acc\u7591",value:"noSus"}],filteredValue:"string"==typeof d?[d]:d,width:120,render:function(t,n){return e.reasonMap.map(function(e,t){if(t++,n.reasons[t]>0)return v.default.createElement("div",{key:n._id+"-"+t},v.default.createElement("strong",null,n.reasons[t]),e)})}},{title:"\u6700\u540e\u4e3e\u62a5\u65f6\u95f4",key:"updated",filterIcon:v.default.createElement(c.default,{type:"calendar",style:{color:this.state.updateFiltered?"#108ee9":"#aaa"}}),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({filterDropdownVisible:t})},filterDropdown:v.default.createElement(M.default,{value:u,columnKey:"updated",onConfirm:this.dateFilter.bind(this)}),width:160,render:function(e,t){return(0,E.default)(t.updated).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",key:"operation",width:100,render:function(t,n,a){return v.default.createElement(s.default,{title:"\u786e\u5b9a\u5220\u9664\uff1f",onConfirm:function(){return e.deleteOrRecoverPost(n,a)}},v.default.createElement("a",{href:"#"},"\u5220\u9664"))}}],p={onChange:function(t){e.setState({selects:t})}};return v.default.createElement("div",null,v.default.createElement(l.default,{type:"primary",icon:"delete",onClick:this.batchDelete.bind(this),disabled:0==this.state.selects.length},"\u6279\u91cf\u5220\u9664"),v.default.createElement(r.default,{rowSelection:p,bordered:!0,columns:f,dataSource:n,rowKey:function(e){return e.comment?e.comment._id:e._id},rowClassName:function(e){return e.deleted?D.default.deletedPost:""},pagination:a,onChange:this.props.onPageChange,loading:this.props.loading}))},t}(v.default.Component);t.default=S,S.contextTypes={store:w.default.object.isRequired},e.exports=t.default},909:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.posts,n=t.reportCommentList,a=t.pagination,o=(0,i.default)({},e,{dataSource:n,pagination:a,loading:e.loading,onPageChange:function(t,n,a){var o=e.location,r=o.query,l=o.pathname,d=a?""+("descend"===a.order?"-":"")+(a.field||""):r.sort;e.dispatch(f.routerRedux.push({pathname:l,query:(0,i.default)({},r,{sort:d},n,{page:t?t.current:r.page,pageSize:t?t.pageSize:r.pageSize})}))}});return d.default.createElement("div",{className:"content-inner"},d.default.createElement(c.default,o))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=a(r),l=n(1),d=a(l),s=n(2),u=(a(s),n(829)),c=a(u),f=n(75),p=n(16);t.default=(0,p.connect)(function(e){var t=e.posts,n=e.loading;return{posts:t,loading:n.models.posts}})(o),e.exports=t.default}});