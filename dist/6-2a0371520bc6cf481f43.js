webpackJsonp([6],{561:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,u,r,n=(a(297),a(296)),d=l(n),o=(a(11),a(10)),s=l(o),f=(a(128),a(58)),c=l(f),m=a(3),p=l(m),h=(a(17),a(19)),g=l(h),y=(a(98),a(97)),v=l(y),E=a(4),I=l(E),_=a(6),j=l(_),b=a(5),V=l(b),x=(a(25),a(24)),M=l(x),q=a(1),w=l(q),C=a(2),F=(l(C),a(78)),D=l(F),S=a(176),k=a(16),z=a(75),A=a(14),O=(l(A),i=(0,k.connect)(function(e){var t=e.activity,a=e.loading;return{activity:t,loading:a.models.activity}}),u=M.default.create(),i(r=u(r=function(e){function t(){(0,I.default)(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];var u=(0,j.default)(this,e.call.apply(e,[this].concat(l)));return u.mojiId="",u}return(0,V.default)(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.dispatch,a=e.params;this.mojiId=a.mojiId||"",t({type:"activity/getMojiDetail",payload:{mojiId:this.mojiId}})},t.prototype.createMoji=function(e){var t=this;e.preventDefault();var a=this.props,l=a.dispatch,i=a.form;i.validateFields(function(e,a){e||(a.image_list=a.image_list.split(","),l(t.mojiId?{type:"activity/updateMoji",payload:{mojiId:t.mojiId,body:a,onSuccess:function(){l(z.routerRedux.push({pathname:"/activities/moji"}))}}}:{type:"activity/createMoji",payload:{values:a,onSuccess:function(){l(z.routerRedux.push({pathname:"/activities/moji"}))}}}))})},t.prototype.render=function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14,offset:1}}},l=function(t){return{name:"postfile",action:D.default.url+"posts-image-upload",showUploadList:!1,headers:{Authorization:S.accountCache.get()?S.accountCache.get().token:null},onChange:function(a){if("done"===a.file.status){var l=a.file.response.url;"picture"===t?e.props.form.setFieldsValue({image_list:e.props.form.getFieldsValue().image_list?e.props.form.getFieldsValue().image_list+","+l:l}):e.props.form.setFieldsValue({image_list:image_list})}},beforeUpload:function(e){if(0!==e.type.indexOf("image"))return v.default.error("\u53ea\u652f\u6301\u4e0a\u4f20\u56fe\u7247\u683c\u5f0f"),!1}}},i=this.props.activity.mojiInfo;return w.default.createElement("div",{className:"content-inner"},w.default.createElement(M.default,{onSubmit:this.createMoji.bind(this)},w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u6587\u7ae0\u540d\u79f0"}),t("title",{initialValue:i.title,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u540d\u79f0"}]})(w.default.createElement(g.default,null))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u6587\u7ae0\u63cf\u8ff0"}),t("desc",{initialValue:i.desc,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u63cf\u8ff0"}]})(w.default.createElement(g.default,null))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u6587\u7ae0\u6765\u6e90"}),t("source",{initialValue:i.source||"\u8ffd\u4e66\u795e\u5668",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6765\u6e90"}]})(w.default.createElement(g.default,null))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u6587\u7ae0\u6807\u7b7e"}),t("tag",{initialValue:i.tag,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u7b7e\uff0c\u591a\u4e2a\u6807\u7b7e\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\u9694\u5f00"}]})(w.default.createElement(g.default,null))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u9875\u9762"}),t("content_url",{initialValue:i.content_url,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9875\u9762\u5730\u5740"}]})(w.default.createElement(g.default,{placeholder:"\u6309\u7167\u58a8\u8ff9\u6a21\u677f\u751f\u6210\u7684\u9875\u9762\uff0c\u9875\u9762\u5177\u4f53\u8981\u6c42\u89c1\u4e0b\u6587\uff0c\u534f\u8bae\u4f7f\u7528https"}))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u539f\u6587\u94fe\u63a5"}),t("original_url",{initialValue:i.original_url,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u539f\u6587\u94fe\u63a5"}]})(w.default.createElement(g.default,{placeholder:"\u539f\u6587\u94fe\u63a5\uff0c\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u7528\u4e8e\u67e5\u770b\u539f\u6587\u4f7f\u7528\uff0c\u534f\u8bae\u4f7f\u7528https"}))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u56fe\u7247"}),t("image_list",{initialValue:i.image_list})(w.default.createElement(g.default,{placeholder:"\u5bbd\u9ad8\u6bd4\u5fc5\u987b\u5728[0.8,2],\u8303\u56f4\uff0cwidth>=200px height>=150px"})),w.default.createElement(d.default,l("picture"),w.default.createElement(s.default,null,w.default.createElement(c.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))),w.default.createElement(M.default.Item,(0,p.default)({},a,{label:"\u7c7b\u578b"}),t("show_type",{initialValue:i.show_type||3,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7c7b\u578b"}]})(w.default.createElement(g.default,null))),w.default.createElement(M.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:7}}},w.default.createElement(s.default,{type:"primary",htmlType:"submit",size:"large"},this.mojiId?"\u7f16\u8f91":"\u6dfb\u52a0"))))},t}(w.default.Component))||r)||r);t.default=O,e.exports=t.default}});