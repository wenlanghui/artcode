webpackJsonp([2],{567:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,u,i,d=(l(70),l(69)),r=a(d),s=(l(50),l(41)),f=a(s),o=(l(297),l(296)),c=a(o),m=(l(11),l(10)),p=a(m),E=(l(128),l(58)),g=a(E),h=(l(45),l(44)),b=a(h),v=l(3),y=a(v),V=(l(17),l(19)),I=a(V),k=l(4),P=a(k),w=l(6),x=a(w),N=l(5),R=a(N),q=(l(25),l(24)),z=a(q),A=l(1),H=a(A),L=l(2),C=(a(L),l(16)),M=l(78),S=a(M),T=l(176),B=l(75),D=l(14),F=a(D),U=(n=(0,C.connect)(function(e){var t=e.recommendApp;return{recommendApp:t}}),u=z.default.create(),n(i=u(i=function(e){function t(){(0,P.default)(this,t);for(var l=arguments.length,a=Array(l),n=0;n<l;n++)a[n]=arguments[n];var u=(0,x.default)(this,e.call.apply(e,[this].concat(a)));return u.id="",u}return(0,R.default)(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.dispatch,l=e.params;this.id=l.id||"",this.id&&t({type:"recommendApp/getIphone",payload:{id:this.id}})},t.prototype.createIphone=function(e){var t=this;e.preventDefault();var l=this.props,a=l.dispatch,n=l.form;n.validateFields(function(e,l){if(!e){l.dateRange&&(l.start=l.dateRange[0],l.end=l.dateRange[1],delete l.dateRange),l.icon=l.icon[l.icon.length-1].url||l.icon[l.icon.length-1].response.url,l.icon=l.icon.replace(/http\:\/\/(.*?)\//,"/"),l.icon.indexOf("?imageView")===-1&&(l.icon=l.icon+"?imageView/2/w/100/h/100");var n=l.isHorizontal?480:320,u=l.isHorizontal?320:480;l.screenshots=l.screenshots.map(function(e){var t=e.url||e.response.url;return t=t.replace(/http\:\/\/(.*?)\//,"/").replace(/\?imageView.*$/,""),t+("?imageView/2/w/"+n+"/h/"+u)}),a({type:t.id?"recommendApp/updateIphone":"recommendApp/createIphone",payload:{id:t.id,body:l,onSuccess:function(){return a(B.routerRedux.push({pathname:"/recommend-app/iphone"}))}}})}})},t.prototype.getScreenUpload=function(e){return e&&e.fileList&&0!==e.fileList.length?e.fileList:[]},t.prototype.render=function(){this.id=this.props.params.id;var e={name:"postfile",action:S.default.url+"posts/image/upload",headers:{Authorization:T.accountCache.get()?T.accountCache.get().token:null}},t={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},l=this.props.form.getFieldDecorator,a=this.props.recommendApp.iphone;return H.default.createElement("div",{className:"content-inner"},H.default.createElement(z.default,{onSubmit:this.createIphone.bind(this)},H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u540d\u79f0"}),l("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u77ed\u7b80\u4ecb"}),l("intro",{initialValue:a.intro,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u77ed\u7b80\u4ecb\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u957f\u7b80\u4ecb"}),l("longIntro",{initialValue:a.longIntro,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u957f\u7b80\u4ecb\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u94fe\u63a5"}),l("link",{initialValue:a.link,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u957f\u94fe\u63a5\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u5185\u90e8\u94fe\u63a5"}),l("insideLink",{initialValue:a.insideLink})(H.default.createElement(I.default,null)),H.default.createElement("div",null,"\u683c\u5f0f: \u7c7b\u578b:id \u5982\uff1agame:5513ecf04a26ec3873fa6233"),H.default.createElement("div",null,"\u7c7b\u578b\u53ef\u4e3a game,book,post,booklist,link")),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u6587\u4ef6\u5927\u5c0f"}),l("size",{initialValue:a.size,rules:[{pattern:/\d+(?:\.\d+)? *(kb|mb|gb|tb)/,message:"\u683c\u5f0f\u9519\u8bef\uff01"}]})(H.default.createElement(I.default,null)),H.default.createElement("div",null,"\u683c\u5f0f: 3.5mb, 370kb, 1.27gb")),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u7ecf\u9a8c\u503c"}),l("exp",{initialValue:a.exp||5})(H.default.createElement(b.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u56fe\u6807"}),l("icon",{valuePropName:"fileList",initialValue:a.icon&&[{url:S.default.staticsHost+a.icon,name:"icon",uid:a.icon,status:"done"}],getValueFromEvent:this.getScreenUpload.bind(this),rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u6807\uff01"}]})(H.default.createElement(c.default,e,H.default.createElement(p.default,null,H.default.createElement(g.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u6807")))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u622a\u56fe"}),l("screenshots",{valuePropName:"fileList",initialValue:a.screenshots&&a.screenshots.map(function(e){return{url:S.default.staticsHost+e,uid:e,status:"done"}})||[],getValueFromEvent:this.getScreenUpload.bind(this)})(H.default.createElement(c.default,(0,y.default)({},e,{listType:"picture-card"}),H.default.createElement("div",null,H.default.createElement(g.default,{type:"plus"}),H.default.createElement("div",{className:"ant-upload-text"},"Upload"))))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u622a\u56fe\u65b9\u5411"}),l("isHorizontal",{initialValue:a.isHorizontal,valuePropName:"checked"})(H.default.createElement(f.default,null,"\u6a2a\u5411"))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u6fc0\u6d3b\u8981\u6c42"}),l("activateRequire",{initialValue:a.activateRequire})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u65f6\u95f4\u8303\u56f4"}),l("dateRange",{initialValue:[(0,F.default)(a.start),(0,F.default)(a.end)],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4\uff01"}]})(H.default.createElement(r.default.RangePicker,{showTime:!0,format:"YYYY-MM-DD HH:mm",placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u9875\u5c3e"}),l("settings.randomEnabled",{valuePropName:"checked",initialValue:a.settings&&a.settings.randomEnabled})(H.default.createElement(f.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u5e94\u7528\u5899"}),l("settings.wallEnabled",{valuePropName:"checked",initialValue:a.settings&&a.settings.wallEnabled})(H.default.createElement(f.default,null)),l("settings.wallPriority",{initialValue:a.settings&&a.settings.wallPriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u6e38\u620f\u4e2d\u5fc3"}),l("settings.gameEnabled",{valuePropName:"checked",initialValue:a.settings&&a.settings.gameEnabled})(H.default.createElement(f.default,null)),l("settings.gamePriority",{initialValue:a.settings&&a.settings.gamePriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u795e\u79d8\u76d2\u5b50"}),l("settings.mysteryBoxEnabled",{valuePropName:"checked",initialValue:a.settings&&a.settings.mysteryBoxEnabled})(H.default.createElement(f.default,null)),l("settings.mysteryBoxPriority",{initialValue:a.settings&&a.settings.mysteryBoxPriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"\u817e\u8baf"}),l("isTencent",{initialValue:a.isTencent,valuePropName:"checked"})(H.default.createElement(f.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"k"}),l("k",{initialValue:a.k})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"p"}),l("p",{initialValue:a.p})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,(0,y.default)({},t,{label:"o"}),l("o",{initialValue:a.o})(H.default.createElement(I.default,null))),H.default.createElement(z.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},H.default.createElement(p.default,{type:"primary",htmlType:"submit",size:"large"},"\u63d0\u4ea4"))))},t}(H.default.Component))||i)||i);t.default=U,e.exports=t.default}});