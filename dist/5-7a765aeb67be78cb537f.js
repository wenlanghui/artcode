webpackJsonp([5],{562:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,r,n,d=(a(70),a(69)),i=l(d),f=(a(45),a(44)),s=l(f),o=(a(46),a(42)),c=l(o),m=(a(50),a(41)),p=l(m),h=(a(297),a(296)),E=l(h),y=(a(11),a(10)),g=l(y),v=(a(128),a(58)),I=l(v),b=a(3),V=l(b),w=(a(17),a(19)),S=l(w),q=(a(98),a(97)),x=l(q),C=a(4),R=l(C),k=a(6),D=l(k),O=a(5),T=l(O),F=(a(25),a(24)),_=l(F),M=a(1),z=l(M),A=a(2),P=(l(A),a(78)),U=l(P),j=a(176),G=a(16),J=a(75),L=a(14),N=l(L),W=(u=(0,G.connect)(function(e){var t=e.activity,a=e.loading;return{activity:t,loading:a.models.activity}}),r=_.default.create(),u(n=r(n=function(e){function t(){(0,R.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];var r=(0,D.default)(this,e.call.apply(e,[this].concat(l)));return r.shareId="",r}return(0,T.default)(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.dispatch,a=e.params;this.shareId=a.shareId||"",t({type:"activity/getShareDetail",payload:{shareId:this.shareId}})},t.prototype.createShare=function(e){var t=this;e.preventDefault();var a=this.props,l=a.dispatch,u=a.form;u.validateFields(function(e,a){e||(a.startTime=a.dateRange[0].startOf("day").toDate(),a.endTime=a.dateRange[1].endOf("day").toDate(),delete a.dateRange,a.picture=a.picture||a.picture2,delete a.picture2,l(t.shareId?{type:"activity/updateShare",payload:{shareId:t.shareId,body:a,onSuccess:function(){l(J.routerRedux.push({pathname:"/activities/share"}))}}}:{type:"activity/createShare",payload:{values:a,onSuccess:function(){l(J.routerRedux.push({pathname:"/activities/share"}))}}}))})},t.prototype.render=function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14,offset:1}}},l=function(t){return{name:"postfile",action:U.default.url+"posts/image/upload",showUploadList:!1,headers:{Authorization:j.accountCache.get()?j.accountCache.get().token:null},onChange:function(a){if("done"===a.file.status){var l=a.file.response.url;"normal"===t?e.props.form.setFieldsValue({picture:l+"?imageView/2/w/200/h/200"}):e.props.form.setFieldsValue({picture2:l})}},beforeUpload:function(e){if(0!==e.type.indexOf("image"))return x.default.error("\u53ea\u652f\u6301\u4e0a\u4f20\u56fe\u7247\u683c\u5f0f"),!1}}},u=this.props.activity.shareInfo;return z.default.createElement("div",{className:"content-inner"},z.default.createElement(_.default,{onSubmit:this.createShare.bind(this)},z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u5165\u53e3\u540d\u79f0"}),t("name",{initialValue:u.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5165\u53e3\u540d\u79f0"}]})(z.default.createElement(S.default,null))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u5206\u4eab\u4e3b\u9898"}),t("title",{initialValue:u.title,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u4eab\u4e3b\u9898"}]})(z.default.createElement(S.default,null))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u8be6\u7ec6\u63cf\u8ff0"}),t("description",{initialValue:u.description,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u63cf\u8ff0"}]})(z.default.createElement(S.default,null))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u5206\u4eab\u56fe\u7247"}),t("picture",{initialValue:u.picture})(z.default.createElement(S.default,null)),z.default.createElement(E.default,l("normal"),z.default.createElement(g.default,null,z.default.createElement(I.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u5206\u4eab\u56fe\u7247(\u9ad8\u6e05)"}),t("picture2",{})(z.default.createElement(S.default,null)),z.default.createElement(E.default,l("high"),z.default.createElement(g.default,null,z.default.createElement(I.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u5206\u4eab\u94fe\u63a5"}),t("link",{initialValue:u.link,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u4eab\u94fe\u63a5"}]})(z.default.createElement(S.default,null))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u8bd5\u7528\u5e73\u53f0"}),t("platform",{initialValue:u.platform||["android","ios"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bd5\u7528\u5e73\u53f0"}]})(z.default.createElement(p.default.Group,{options:["android","ios"]}))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u9001\u4e66\u5377\u6570\u91cf"}),t("num",{initialValue:u.num||"100",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9001\u4e66\u5377\u6570\u91cf"}]})(z.default.createElement(S.default,null))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u6807\u793a"}),t("mark",{initialValue:"share"})(z.default.createElement(c.default,null,z.default.createElement(c.default.Option,{value:"share"},"share")))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u6743\u91cd"}),t("weight",{initialValue:u.weight||0})(z.default.createElement(s.default,null))),z.default.createElement(_.default.Item,(0,V.default)({},a,{label:"\u65e5\u671f\u8303\u56f4"}),t("dateRange",{initialValue:[(0,N.default)(u.startTime),(0,N.default)(u.endTime)],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65e5\u671f\u8303\u56f4"}]})(z.default.createElement(i.default.RangePicker,null))),z.default.createElement(_.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:7}}},z.default.createElement(g.default,{type:"primary",htmlType:"submit",size:"large"},this.shareId?"\u7f16\u8f91":"\u6dfb\u52a0"))))},t}(z.default.Component))||n)||n);t.default=W,e.exports=t.default}});