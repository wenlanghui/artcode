webpackJsonp([45],{126:function(e,t){e.exports={postBlock:"postBlock___289N6",deletedPost:"deletedPost___29jEr",marginLeft10:"marginLeft10___187xh",checkDiv:"checkDiv___32MNn",radioAndCheck:"radioAndCheck___1BDvU",postContent:"postContent___2wa8u",postInfo:"postInfo___2AFM9",content:"content___2jS2O",listPicture:"listPicture___2iS2s",addPostTip:"addPostTip___1hiRw"}},420:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,l=n(4),i=a(l),s=n(6),d=a(s),u=n(5),c=a(u),p=(n(70),n(69)),f=a(p),h=n(1),m=a(h),g=n(14),y=a(g),_=f.default.RangePicker,v=(r=o=function(e){function t(){(0,i.default)(this,t);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var r=(0,d.default)(this,e.call.apply(e,[this].concat(a)));return r.range=r.props.value||[],r.isChange=!1,r}return(0,c.default)(t,e),t.prototype.handleChange=function(e){2==e.length?this.range=[e[0].startOf("day").format("YYYY-MM-DD HH:mm:ss"),e[1].endOf("day").format("YYYY-MM-DD HH:mm:ss")]:this.range=[],this.isChange=!0},t.prototype.confirm=function(){this.props.onConfirm&&this.props.onConfirm(this.props.columnKey,this.range,this.isChange)},t.prototype.render=function(){var e=this.props.value;return e&&(e=e.map(function(e){return(0,y.default)(e)})),m.default.createElement("div",{className:"ant-table-filter-dropdown"},m.default.createElement("div",{style:{width:225},className:"date-filter-dropdown"},m.default.createElement(_,{defaultValue:e||[],getCalendarContainer:function(){return document.querySelector(".date-filter-dropdown")},onChange:this.handleChange.bind(this)})),m.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},m.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:this.confirm.bind(this)},"\u786e\u5b9a")))},t}(m.default.Component),o.propTypes={columnKey:h.PropTypes.string.isRequired},r);t.default=v,e.exports=t.default},830:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n(93),n(92)),r=a(o),l=(n(11),n(10)),i=a(l),s=(n(30),n(29)),d=a(s),u=(n(128),n(58)),c=a(u),p=n(4),f=a(p),h=n(6),m=a(h),g=n(5),y=a(g),_=n(1),v=a(_),C=n(2),b=a(C),w=n(14),k=a(w),E=n(126),D=a(E),P=n(73),x=n(420),M=a(x),q=function(e){function t(n){(0,f.default)(this,t);var a=(0,m.default)(this,e.call(this,n));return a.reasonMap=["\u8fb1\u9a82","\u5e7f\u544a","\u8272\u60c5","\u654f\u611f","\u5acc\u7591"],a.state={selects:[],updateFiltered:n.location.query.start&&n.location.query.end,filterDropdownVisible:!1},a}return(0,y.default)(t,e),t.prototype.deleteOrRecoverPost=function(e,t){this.context.store.dispatch({type:"posts/deletePost",payload:{postId:e.post._id,index:t,page:"report"}})},t.prototype.batchDelete=function(){this.context.store.dispatch({type:"posts/batchDeletePost",payload:{ids:this.state.selects}})},t.prototype.dateFilter=function(e,t,n){console.log(e,t,n),this.setState({filterDropdownVisible:!1,updateFiltered:2===t.length}),n&&this.props.onPageChange(null,{start:t[0],end:t[1]})},t.prototype.render=function(){var e=this,t=this.props,n=t.dataSource,a=t.pagination,o=t.location,l=o.query.sort,s=o.query.reason,u=[];o.query.start&&o.query.end&&(u=[o.query.start,o.query.end]);var p=[{title:"\u5e16\u5b50\u6807\u9898",dataIndex:"post.title",key:"post.title",width:260,render:function(e,t){return"short_review"===t.post.block?"["+t.post.book.title+"]"+t.post.content:v.default.createElement("a",{href:"#/posts/"+t.post._id},t.post.title)}},{title:"\u4e3e\u62a5\u6b21\u6570",dataIndex:"count",key:"count",sorter:!0,sortOrder:!!l&&("count"===l?"ascend":"descend"),width:100},{title:"\u7406\u7531",dataIndex:"reason",key:"reason",width:120,filters:[{text:"\u5acc\u7591",value:"sus"},{text:"\u975e\u5acc\u7591",value:"noSus"}],filteredValue:"string"==typeof s?[s]:s,render:function(t,n){return e.reasonMap.map(function(e,t){if(t++,n.reasons[t]>0)return v.default.createElement("div",{key:n._id+"-"+t},v.default.createElement("strong",null,n.reasons[t]),e)})}},{title:"\u4f5c\u8005",dataIndex:"post.author.nickname",width:100,key:"author",render:function(e,t){return v.default.createElement("a",{href:(0,P.makeUserInfoUrl)(t.post.author&&t.post.author._id)},t.post&&t.post.author?t.post.author.nickname:"")}},{title:"\u6700\u540e\u4e3e\u62a5\u65f6\u95f4",key:"updated",filterIcon:v.default.createElement(c.default,{type:"calendar",style:{color:this.state.updateFiltered?"#108ee9":"#aaa"}}),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({filterDropdownVisible:t})},filterDropdown:v.default.createElement(M.default,{value:u,columnKey:"updated",onConfirm:this.dateFilter.bind(this)}),render:function(e,t){return(0,k.default)(t.updated).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",key:"operation",width:100,render:function(t,n,a){return v.default.createElement(d.default,{title:"\u786e\u5b9a\u5220\u9664\uff1f",onConfirm:function(){return e.deleteOrRecoverPost(n,a)}},v.default.createElement("a",{href:"#"},"\u5220\u9664"))}}],f={onChange:function(t){e.setState({selects:t})}};return v.default.createElement("div",null,v.default.createElement(i.default,{type:"primary",icon:"delete",onClick:this.batchDelete.bind(this),disabled:0==this.state.selects.length},"\u6279\u91cf\u5220\u9664"),v.default.createElement(r.default,{rowSelection:f,bordered:!0,columns:p,dataSource:n,rowKey:function(e){return e.post._id},rowClassName:function(e){return e.deleted?D.default.deletedPost:""},pagination:a,onChange:this.props.onPageChange,loading:this.props.loading}))},t}(v.default.Component);t.default=q,q.contextTypes={store:b.default.object.isRequired},e.exports=t.default},910:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.posts,n=t.reportList,a=t.pagination,o=(0,s.default)({},e,{dataSource:n,pagination:a,loading:e.loading,onPageChange:function(t,n,a){var o=e.location,r=o.query,l=o.pathname,i=a?""+("descend"===a.order?"-":"")+(a.field||""):r.sort;e.dispatch(h.routerRedux.push({pathname:l,query:(0,s.default)({},r,{sort:i},n,{page:t?t.current:r.page,pageSize:t?t.pageSize:r.pageSize})}))}}),r=e.location.query.haveImage||"",i=function(t){e.dispatch(h.routerRedux.push({pathname:e.location.pathname,query:{haveImage:t.target.value}}))};return u.default.createElement("div",{className:"content-inner"},u.default.createElement("div",{className:y.default.postBlock},u.default.createElement(l.default.Group,{onChange:i,value:r},u.default.createElement(l.default.Button,{value:""},"\u5168\u90e8"),u.default.createElement(l.default.Button,{value:"1"},"\u6709\u56fe"))),u.default.createElement(f.default,o))}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(39),n(36)),l=a(r),i=n(3),s=a(i),d=n(1),u=a(d),c=n(2),p=(a(c),n(830)),f=a(p),h=n(75),m=n(16),g=n(126),y=a(g);t.default=(0,m.connect)(function(e){var t=e.posts,n=e.loading;return{posts:t,loading:n.models.posts}})(o),e.exports=t.default}});