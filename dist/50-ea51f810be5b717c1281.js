webpackJsonp([50],{411:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(){}Object.defineProperty(t,"__esModule",{value:!0});var r=a(12),n=s(r),u=a(4),c=s(u),i=a(13),o=s(i),d=a(6),f=s(d),p=a(5),m=s(p),h=a(1),v=s(h),y=a(51),g=s(y),E=a(190),k=s(E),b=a(58),I=s(b),S=a(15),_=s(S),x=function(e){function t(e){(0,c.default)(this,t);var a=(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClose=function(e){e.preventDefault();var t=g.default.findDOMNode(a);t.style.height=t.offsetHeight+"px",t.style.height=t.offsetHeight+"px",a.setState({closing:!1}),(a.props.onClose||l)(e)},a.animationEnd=function(){a.setState({closed:!0,closing:!0})},a.state={closing:!0,closed:!1},a}return(0,m.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.closable,s=t.description,l=t.type,r=t.prefixCls,u=void 0===r?"ant-alert":r,c=t.message,i=t.closeText,o=t.showIcon,d=t.banner,f=t.className,p=void 0===f?"":f,m=t.style;o=!(!d||void 0!==o)||o,l=d&&void 0===l?"warning":l||"info";var h="";switch(l){case"success":h="check-circle";break;case"info":h="info-circle";break;case"error":h="cross-circle";break;case"warning":h="exclamation-circle";break;default:h="default"}s&&(h+="-o");var y=(0,_.default)(u,(e={},(0,n.default)(e,u+"-"+l,!0),(0,n.default)(e,u+"-close",!this.state.closing),(0,n.default)(e,u+"-with-description",!!s),(0,n.default)(e,u+"-no-icon",!o),(0,n.default)(e,u+"-banner",!!d),e),p);i&&(a=!0);var g=a?v.default.createElement("a",{onClick:this.handleClose,className:u+"-close-icon"},i||v.default.createElement(I.default,{type:"cross"})):null;return this.state.closed?null:v.default.createElement(k.default,{component:"",showProp:"data-show",transitionName:u+"-slide-up",onEnd:this.animationEnd},v.default.createElement("div",{"data-show":this.state.closing,className:y,style:m},o?v.default.createElement(I.default,{className:u+"-icon",type:h}):null,v.default.createElement("span",{className:u+"-message"},c),v.default.createElement("span",{className:u+"-description"},s),g))}}]),t}(v.default.Component);t.default=x,e.exports=t.default},412:[1437,466],466:35,929:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,r,n,u=(a(412),a(411)),c=s(u),i=(a(520),a(519)),o=s(i),d=(a(11),a(10)),f=s(d),p=(a(45),a(44)),m=s(p),h=(a(17),a(19)),v=s(h),y=(a(46),a(42)),g=s(y),E=(a(98),a(97)),k=s(E),b=a(4),I=s(b),S=a(6),_=s(S),x=a(5),w=s(x),N=(a(25),a(24)),C=s(N),O=a(1),P=s(O),M=a(16),D=a(569),j=(a(23),l=(0,M.connect)(function(e){var t=e.user;return{user:t}}),r=C.default.create(),l(n=r(n=function(e){function t(){(0,I.default)(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var r=(0,_.default)(this,e.call.apply(e,[this].concat(s)));return r.state={type:"",progress:0,status:"active"},r}return(0,w.default)(t,e),t.prototype.batchSend=function(e){var t=this;e.preventDefault();var a=this.props,s=(a.dispatch,a.form);s.validateFields(function(e,a){if(!e){a.users=a.users.split("\n").map(function(e){return e.trim()});var s="vip"===a.type?D.userService.batchSendVip:D.userService.batchSendVoucher;s(a).then(function(e){e.success&&!e.task?k.default.success("\u53d1\u653e\u6210\u529f"):e.task?(t.setState({taskId:e.task}),t.getProgress(e.task)):k.default.error(e.error)})}})},t.prototype.getProgress=function(e){var t=this,a=setInterval(function(){D.userService.getBatchSendProgress({taskId:e}).then(function(e){e.task?(t.setState({progress:e.task.progress,status:e.task.status}),"success"===e.task.status?(t.setState({taskId:"",progress:0,status:"active"}),clearInterval(a),k.default.success("\u53d1\u653e\u6210\u529f")):"exception"===e.task.status&&(clearInterval(a),t.setState({taskId:"",progress:0,status:"active",errorUser:e.task.userId}))):clearInterval(a)})},1e3)},t.prototype.render=function(){var e=this,t=this.props.form.getFieldDecorator;return P.default.createElement("div",{className:"content-inner"},P.default.createElement("h2",{style:{marginBottom:20}},"\u6279\u91cf\u53d1\u653e\u5956\u52b1"),P.default.createElement(C.default,{onSubmit:this.batchSend.bind(this)},P.default.createElement(C.default.Item,{label:"\u5956\u52b1\u7c7b\u578b"},t("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5956\u52b1\u7c7b\u578b"}]})(P.default.createElement(g.default,{onSelect:function(t){return e.setState({type:t})}},P.default.createElement(g.default.Option,{key:"vip",value:"vip"},"\u514d\u5e7f\u544a"),P.default.createElement(g.default.Option,{key:"voucher",value:"voucher"},"\u9001\u4e66\u5238")))),P.default.createElement(C.default.Item,{label:"\u5956\u52b1\u8bf4\u660e"},t("reason",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5956\u52b1\u8bf4\u660e"}]})(P.default.createElement(v.default,null))),P.default.createElement(C.default.Item,{label:"\u5956\u52b1\u7528\u6237",extra:"\u7528\u6237id\u4ee5\u6362\u884c\u5206\u5272"},t("users",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5956\u52b1\u7528\u6237"}]})(P.default.createElement(v.default,{type:"textarea",rows:4,placeholder:"\u7528\u6237id\u4ee5\u6362\u884c\u5206\u5272"}))),P.default.createElement(C.default.Item,{label:"\u514d\u5e7f\u544a\u5929\u6570",style:{display:"vip"==this.state.type?"block":"none"}},t("day")(P.default.createElement(m.default,{min:0}))),P.default.createElement(C.default.Item,{label:"\u4e66\u5238\u6570\u91cf\uff0c\u6709\u6548\u5929\u6570",style:{display:"voucher"==this.state.type?"block":"none"}},t("currency")(P.default.createElement(m.default,{min:0})),t("expire",{initialValue:45})(P.default.createElement(m.default,{min:0}))),P.default.createElement(C.default.Item,null,P.default.createElement(f.default,{disabled:!!this.state.taskId,type:"primary",htmlType:"submit",size:"large"},"\u53d1\u653e"))),P.default.createElement("div",{style:{display:this.state.taskId?"block":"none"}},P.default.createElement(o.default,{percent:this.state.progress,status:this.state.status})),P.default.createElement(c.default,{style:{display:this.state.errorUser?"block":"none"},message:"\u7528\u6237"+this.state.errorUser+"\u53ca\u4e4b\u540e\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u53d1\u9001\u5931\u8d25\u7528\u6237",type:"error"}))},t}(P.default.Component))||n)||n);t.default=j,e.exports=t.default}});