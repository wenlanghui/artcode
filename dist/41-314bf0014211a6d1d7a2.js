webpackJsonp([41],{184:35,846:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a(72),a(71)),u=l(n),d=(a(50),a(41)),i=l(d),r=(a(46),a(42)),f=l(r),o=(a(297),a(296)),c=l(o),s=(a(11),a(10)),m=l(s),p=(a(128),a(58)),h=l(p),y=(a(17),a(19)),g=l(y),b=a(3),k=l(b),E=a(4),v=l(E),w=a(6),C=l(w),I=a(5),M=l(I),T=(a(70),a(69)),O=l(T),x=(a(25),a(24)),V=l(x),F=a(1),Y=l(F),_=a(2),R=(l(_),a(14)),j=l(R),N=a(78),D=l(N),W=V.default.Item,q="YYYY/MM/DD",A=O.default.RangePicker,P={labelCol:{span:4},wrapperCol:{span:12}},S=function(e){function t(a){(0,v.default)(this,t);var l=(0,C.default)(this,e.call(this,a));return l.state={type:"day",block:"\u65b0\u624b\u4efb\u52a1",beginTime:(0,j.default)().format(q),endTime:(0,j.default)((0,j.default)().add("d",30),q).format(q),modify:!1},l}return(0,M.default)(t,e),t.prototype.render=function(){function e(e){this.setState((0,k.default)({},this.state,{beginTime:(0,j.default)(e[0]).format(q),endTime:(0,j.default)(e[1]).format(q),modify:!0}))}function t(e){this.setState((0,k.default)({},this.state,{block:e,modify:!0}))}var a=this,l=this.props.form,n=l.getFieldDecorator,d=l.validateFields,r=l.getFieldsValue,o=l.setFieldsValue,s=l.resetFields,p=this.props,y=p.type,b=(p.loading,p.item),E=(p.onCreate,p.onUpdate,p.fileList),v=p.visible,w=p.onCancel,C=p.onOk,I={title:""+("create"===y?"\u65b0\u5efa":"\u7f16\u8f91"),visible:v,onOk:function(){d(function(e){if(!e){var t=(0,k.default)({},r(),{key:b.key});t.icon.file&&(t.icon=t.icon.file.response.url);var l=(0,k.default)({},a.state,t);delete a.state.fileList,C(l),s(),delete a.state.fileList}})},onCancel:w,wrapClassName:"vertical-center-modal"},M={onChange:function(e){e.file.response&&o({icon:e.file.response.url}),a.setState((0,k.default)({},a.state,{fileList:[e.file],modify:!0}))}};return this.state=b._id&&!this.state.modify?(0,k.default)({},b):(0,k.default)({},this.state),Y.default.createElement(u.default,I,Y.default.createElement(W,(0,k.default)({label:"ID",style:{display:"none"},hasFeedback:!0},P),n("_id",{initialValue:"create"===y?"":b._id})(Y.default.createElement(g.default,null))),Y.default.createElement(V.default,{horizontal:!0},Y.default.createElement(W,(0,k.default)({label:"\u56fe\u6807:",hasFeedback:!0},P),n("icon",{initialValue:"create"===y?"":b.icon})(Y.default.createElement(c.default,(0,k.default)({listType:"picture",fileList:this.state.fileList||E,name:"coverfile",action:D.default.url+"welfares-upload-icon",headers:{"X-Requested-With":null,Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1OGU1ZTNjNGM1NjRmZDA3NTlhYWFmOWUiLCJuYW1lIjoibGl1eWpAMTM5MS5jb20iLCJjZWxscGhvbmUiOiIxNTAxMzIzNDgyMSIsImVtYWlsIjoibGl1eWpAMTM5MS5jb20iLCJpYXQiOjE0OTE1MjgzMjIsImV4cCI6MTQ5NDEyMDMyMn0.9yeehye4Yck9f2yOyt7kgVnGWI7bT7KWUNcY2RtThyc"}},M),Y.default.createElement(m.default,null,Y.default.createElement(h.default,{type:"upload"}),"\u9009\u62e9\u6587\u4ef6")))),Y.default.createElement(W,(0,k.default)({label:"\u6d3b\u52a8\u540d\u79f0:",hasFeedback:!0},P),n("title",{initialValue:"create"===y?"":b.title,rules:[{required:!0,message:"\u6d3b\u52a8\u540d\u79f0\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u7c7b\u578b",hasFeedback:!0},P),n("block",{initialValue:"create"===y?"":b.block,rules:[{required:!0,message:"\u7c7b\u578b\u672a\u586b\u5199"}]})(Y.default.createElement(f.default,{style:{width:120},size:"small",onChange:t.bind(this)},Y.default.createElement(f.default.Option,{key:"\u65b0\u624b\u4efb\u52a1",value:"\u65b0\u624b\u4efb\u52a1",style:{width:"100%",marginRight:"3%"}},"\u65b0\u624b\u4efb\u52a1"),Y.default.createElement(f.default.Option,{key:"\u6bcf\u65e5\u4efb\u52a1",value:"\u6bcf\u65e5\u4efb\u52a1",style:{width:"100%",marginRight:"3%"}},"\u6bcf\u65e5\u4efb\u52a1"),Y.default.createElement(f.default.Option,{key:"\u6d3b\u52a8\u4efb\u52a1",value:"\u6d3b\u52a8\u4efb\u52a1",style:{width:"100%",marginRight:"3%"}},"\u6d3b\u52a8\u4efb\u52a1"),Y.default.createElement(f.default.Option,{key:"apk\u4efb\u52a1",value:"apk\u4efb\u52a1",style:{width:"100%",marginRight:"3%"}},"apk\u4efb\u52a1")))),Y.default.createElement(W,(0,k.default)({label:"\u4efb\u52a1\u7b80\u4ecb",hasFeedback:!0},P),n("desc",{initialValue:"create"===y?"":b.desc,rules:[{required:!0,message:"\u7b80\u4ecb\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u6309\u94ae\u6587\u6848",hasFeedback:!0},P),n("buttonText",{initialValue:"create"===y?"":b.buttonText,rules:[{required:!0,message:"\u6309\u94ae\u6587\u6848"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u7ecf\u9a8c\u5956\u52b1",hasFeedback:!0},P),n("exp",{initialValue:"create"===y?0:b.exp,rules:[{required:!0,message:"\u7ecf\u9a8c\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u4e66\u5238\u5956\u52b1",hasFeedback:!0},P),n("voucher",{initialValue:"create"===y?0:b.voucher,rules:[{required:!0,message:"\u4e66\u5238\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u5305\u6708\u5929\u6570\u5956\u52b1",hasFeedback:!0},P),n("monthly",{initialValue:"create"===y?0:b.monthly,rules:[{required:!0,message:"\u5305\u6708\u5929\u6570\u5956\u52b1\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u4efb\u52a1\u6807\u8bc6",hasFeedback:!0},P),n("action",{initialValue:"create"===y?"":b.action,rules:[{required:!0,message:"\u4efb\u52a1\u6807\u8bc6\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,{placeholder:"\u9700\u8981\u548c\u5ba2\u6237\u7aef\u7ea6\u5b9a\u540e\u914d\u7f6e,\u79ef\u5206\u5899\u4efb\u52a1\u65f6\uff0c\u586b\u5199appId",disabled:"create"!==y}))),Y.default.createElement(W,(0,k.default)({label:"\u7c7b\u578b\u6807\u8bc6",hasFeedback:!0},P),n("type",{initialValue:"create"===y?"":b.type,rules:[{required:!0,message:"\u7c7b\u578b\u6807\u8bc6\u672a\u586b\u5199"}]})(Y.default.createElement(f.default,{style:{width:120},size:"small",onChange:t.bind(this)},Y.default.createElement(f.default.Option,{key:"one",value:"one",style:{width:"100%",marginRight:"3%"}},"\u4e00\u6b21\u6027"),Y.default.createElement(f.default.Option,{key:"day",value:"day",style:{width:"100%",marginRight:"3%"}},"\u6bcf\u65e5"),Y.default.createElement(f.default.Option,{key:"week",value:"week",style:{width:"100%",marginRight:"3%"}},"\u6bcf\u5468"),Y.default.createElement(f.default.Option,{key:"month",value:"month",style:{width:"100%",marginRight:"3%"}},"\u6bcf\u6708"),Y.default.createElement(f.default.Option,{key:"unlimited",value:"unlimited",style:{width:"100%",marginRight:"3%"}},"\u65e0\u9650\u5236"),Y.default.createElement(f.default.Option,{key:"app",value:"app",style:{width:"100%",marginRight:"3%"}},"\u79ef\u5206\u5899")))),Y.default.createElement(W,(0,k.default)({label:"\u987a\u5e8f",hasFeedback:!0},P),n("order",{initialValue:"create"===y?1:b.order,rules:[{required:!0,message:"\u987a\u5e8f\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u7248\u672c\u53f7",hasFeedback:!0},P),n("version",{initialValue:"create"===y?2:b.version,rules:[{required:!0,message:"\u7248\u672c\u53f7\u672a\u586b\u5199"}]})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u662f\u5426\u53ef\u70b9\u51fb",hasFeedback:!0},P),n("canClick",{valuePropName:"checked",initialValue:"create"!==y&&b.canClick})(Y.default.createElement(i.default,null))),Y.default.createElement(W,(0,k.default)({label:"h5\u6d3b\u52a8\u5730\u5740",hasFeedback:!0},P),n("link",{initialValue:"create"===y?"":b.link||""})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"apk\u7248\u672c",hasFeedback:!0},P),n("apkVersion",{initialValue:"create"===y?"":b.apkVersion||""})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"apk\u5206\u53d1\u6e20\u9053",hasFeedback:!0},P),n("apkOrg",{initialValue:"create"===y?"":b.apkOrg||""})(Y.default.createElement(g.default,null))),Y.default.createElement(W,(0,k.default)({label:"\u6709\u6548\u65f6\u95f4",hasFeedback:!0},P),n("dateRange",{initialValue:"create"===y?[(0,j.default)(this.state.beginTime,q),(0,j.default)(this.state.endTime,q)]:[(0,j.default)((0,j.default)(b.beginTime).format("YYYY/MM/DD"),q),(0,j.default)((0,j.default)(b.endTime).format("YYYY/MM/DD"),q)]})(Y.default.createElement(A,{onChange:e.bind(this),format:q})))))},t}(Y.default.Component);t.default=V.default.create()(S),e.exports=t.default},847:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a(93),a(92)),u=l(n),d=a(43),i=l(d),r=a(208),f=l(r),o=a(4),c=l(o),s=a(6),m=l(s),p=a(5),h=l(p),y=a(1),g=l(y),b=a(2),k=(l(b),a(315)),E=a(184),v=l(E),w=a(14),C=l(w),I="YYYY/MM/DD",M=function(e){function t(a){(0,c.default)(this,t);var l=(0,m.default)(this,e.call(this,a));return l.getBodyWrapper=function(e){return l.currentPage!==l.newPage?(l.currentPage=l.newPage,e):g.default.createElement(k.TweenOneGroup,{component:"tbody",className:e.props.className,enter:l.enterAnim,leave:l.leaveAnim,appear:!1},e.props.children)},l.onEnd=function(e){e.target.style.height="auto"},l.enterAnim=[{opacity:0,x:30,backgroundColor:"#fffeee",duration:0},{height:0,duration:200,type:"from",delay:250,ease:"easeOutQuad",onComplete:l.onEnd},{opacity:1,x:0,duration:250,ease:"easeOutQuad"},{delay:1e3,backgroundColor:"#fff"}],l.leaveAnim=[{duration:250,opacity:0},{height:0,duration:200,ease:"easeOutQuad"}],l}return(0,h.default)(t,e),t.prototype.pageChange=function(){function e(e){return t.apply(this,arguments)}var t=(0,f.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onPageChange(t);case 2:this.newPage=t.current;case 3:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.render=function(){var e=this.props,t=e.loading,a=e.dataSource,l=e.pagination,n=e.onEditItem,d=[{title:"\u7248\u672c",dataIndex:"version",key:"version"},{title:"\u5e8f\u53f7",dataIndex:"order",key:"order"},{title:"\u6d3b\u52a8\u540d\u79f0",dataIndex:"title",key:"title"},{title:"\u7c7b\u578b",dataIndex:"block",key:"block"},{title:"\u7ecf\u9a8c",dataIndex:"exp",key:"exp"},{title:"\u4e66\u5238",dataIndex:"voucher",key:"voucher"},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"beginTime",key:"beginTime",render:function(e,t){return g.default.createElement("p",null,(0,C.default)((0,C.default)(t.beginTime)).format(I))}},{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"endTime",key:"endTime",render:function(e,t){return g.default.createElement("p",null,(0,C.default)((0,C.default)(t.endTime)).format(I))}},{title:"\u72b6\u6001",dataIndex:"stat",key:"stat",render:function(e,t){return g.default.createElement("p",null,(0,C.default)(t.endTime)<(0,C.default)()?g.default.createElement("label",{style:{color:"red"}},"\u8fc7\u671f"):g.default.createElement("label",{style:{color:"green"}},"\u6b63\u5e38"))}},{title:"\u64cd\u4f5c",key:"operation",width:100,render:function(e,t){return g.default.createElement("p",null,g.default.createElement("a",{onClick:function(){return n(t)},style:{marginRight:4}},"\u67e5\u770b"))}}];return g.default.createElement("div",null,g.default.createElement(u.default,{className:v.default.table,bordered:!0,columns:d,dataSource:a,loading:t,onChange:this.pageChange.bind(this),pagination:l,simple:!0,rowKey:function(e){return e._id},getBodyWrapper:this.getBodyWrapper}))},t}(g.default.Component);t.default=M,e.exports=t.default},850:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a(25),a(24)),u=l(n),d=(a(11),a(10)),i=l(d),r=(a(17),a(19)),f=l(r),o=a(4),c=l(o),s=a(6),m=l(s),p=a(5),h=l(p),y=(a(46),a(42)),g=l(y),b=a(1),k=l(b),E=a(2),v=l(E),w=g.default.Option,C=function(e){function t(a){return(0,c.default)(this,t),(0,m.default)(this,e.call(this,a))}return(0,h.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.onChange,a=e.onSearch,l=e.onAdd;return k.default.createElement("div",null,k.default.createElement("div",{style:{marginBottom:"15px"}},k.default.createElement("lable",{style:{marginRight:"15px"}},"\u4efb\u52a1\u7c7b\u578b\uff1a"),k.default.createElement(g.default,{id:"welfare_type",style:{width:120,marginRight:"15px"},defaultValue:"",onChange:t.bind(this)},k.default.createElement(w,{value:""},"\u5168\u90e8"),k.default.createElement(w,{value:"\u65b0\u624b\u4efb\u52a1"},"\u65b0\u624b\u4efb\u52a1"),k.default.createElement(w,{value:"\u6bcf\u65e5\u4efb\u52a1"},"\u6bcf\u65e5\u4efb\u52a1"),k.default.createElement(w,{value:"\u6d3b\u52a8\u4efb\u52a1"},"\u6d3b\u52a8\u4efb\u52a1"),k.default.createElement(w,{value:"apk\u4efb\u52a1"},"apk\u4efb\u52a1")),k.default.createElement("lable",{style:{marginRight:"15px"}},"\u7248\u672c\uff1a"),k.default.createElement(f.default,{id:"version",defaultValue:"1",placeholder:"\u4efb\u52a1\u7248\u672c\uff0c\u533a\u5206\u4e0d\u540capp",style:{width:120}}),k.default.createElement(i.default,{onClick:a.bind(this)},"\u67e5\u8be2"),k.default.createElement(i.default,{style:{marginLeft:20},type:"ghost",onClick:l},"\u6dfb\u52a0")))},t}(k.default.Component);C.propTypes={onSearch:v.default.func,onAdd:v.default.func},t.default=u.default.create()(C),e.exports=t.default},936:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.location,a=e.dispatch,l=e.welfares,n=l.loading,u=l.list,d=l.block,r=l.modalVisible,o=l.modalType,s=l.currentItem,m={item:"create"===o?{}:s,type:o,visible:r,fileList:"create"===o?[]:[{uid:-1,name:"",status:"done",url:""+w.default.staticsHost+s.icon}],onOk:function(e){a({type:"welfares/"+o,payload:{data:e,location:t}})},onCancel:function(){a({type:"welfares/hideModal"})}},p={dataSource:u,loading:n,onEditItem:function(e){a({type:"welfares/showModal",payload:{modalType:"update",currentItem:e}})}},h={onAdd:function(){a({type:"welfares/showModal",payload:{modalType:"create"}})},onChange:function(e){this.props=(0,f.default)({},this.props,{block:e})},onSearch:function(){this.props=(0,f.default)({},this.props,{block:void 0===this.props.block?"":this.props.block});var e=void 0!==this.props.block?this.props.block:d,t=document.getElementById("version").value,l=""!==e?{filters:(0,i.default)({block:e,version:{$in:[0,t||1]}})}:{};a({type:"welfares/query",payload:l})}};return c.default.createElement("div",{className:"content-inner"},c.default.createElement(y.default,h),c.default.createElement(b.default,p),c.default.createElement(E.default,m))}function u(e){var t=e.welfares;return{welfares:t}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(133),i=l(d),r=a(3),f=l(r),o=a(1),c=l(o),s=a(2),m=l(s),p=(a(75),a(16)),h=a(850),y=l(h),g=a(847),b=l(g),k=a(846),E=l(k),v=a(78),w=l(v);n.propTypes={welfares:m.default.object,location:m.default.object,dispatch:m.default.func},t.default=(0,p.connect)(u)(n),e.exports=t.default}});