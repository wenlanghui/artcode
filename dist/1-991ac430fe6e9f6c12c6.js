webpackJsonp([1],{126:function(e,t){e.exports={postBlock:"postBlock___289N6",deletedPost:"deletedPost___29jEr",marginLeft10:"marginLeft10___187xh",checkDiv:"checkDiv___32MNn",radioAndCheck:"radioAndCheck___1BDvU",postContent:"postContent___2wa8u",postInfo:"postInfo___2AFM9",content:"content___2jS2O",listPicture:"listPicture___2iS2s",addPostTip:"addPostTip___1hiRw"}},565:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n,r,i=(l(297),l(296)),u=a(i),s=(l(11),l(10)),f=a(s),d=(l(741),l(740)),c=a(d),p=(l(17),l(19)),h=a(p),m=(l(50),l(41)),v=a(m),b=(l(70),l(69)),y=a(b),g=l(3),_=a(g),k=(l(39),l(36)),w=a(k),C=(l(72),l(71)),E=a(C),O=l(4),x=a(O),P=l(6),I=a(P),V=l(5),M=a(V),j=(l(25),l(24)),H=a(j),D=l(1),S=a(D),N=l(2),T=(a(N),l(16)),L=l(126),F=a(L),z=l(78),B=a(z),R=l(176),A=(o=(0,T.connect)(function(e){var t=e.posts;return{posts:t}}),n=H.default.create({}),o(r=n(r=function(e){function t(){(0,x.default)(this,t);for(var l=arguments.length,a=Array(l),o=0;o<l;o++)a[o]=arguments[o];var n=(0,I.default)(this,e.call.apply(e,[this].concat(a)));return n.blockOptions=[{label:"\u7efc\u5408\u8ba8\u8bba",value:"ramble"},{label:"\u4e66\u8352\u4e92\u52a9",value:"help"},{label:"\u7cbe\u5f69\u4e66\u8bc4",value:"review"},{label:"\u539f\u521b\u5199\u4f5c",value:"original"},{label:"\u6d3b\u52a8\u798f\u5229",value:"fuli"},{label:"\u5927\u8bdd\u5386\u53f2",value:"dahua"},{label:"\u7f51\u6587\u6c5f\u6e56",value:"wangwen"},{label:"\u82f1\u96c4\u8054\u76df",value:"yingxiong"},{label:"\u4e8c\u6b21\u5143",value:"erciyuan"},{label:"\u5973\u751f\u5bc6\u8bed",value:"girl"},{label:"\u4e66\u7c4d\u8bdd\u9898\u533a",value:"book"},{label:"\u6e38\u620f\u533a",value:"game"},{label:"Android \u53cd\u9988\u533a",value:"android-feedback"},{label:"iOS \u53cd\u9988\u533a",value:"ios-feedback"}],n.state={block:""},n}return(0,M.default)(t,e),t.prototype.blockChange=function(e){this.setState({block:e.target.value})},t.prototype.submit=function(e){e.preventDefault();var t=this.props.posts.addPost;t._id?this.props.dispatch({type:"posts/updatePostFromEdit",payload:{postId:t._id,body:this.props.form.getFieldsValue()}}):this.props.dispatch({type:"posts/addPost",payload:this.props.form.getFieldsValue()})},t.prototype.showInBlocks=function(e,t){return e.indexOf(this.state.block)===-1?(this.props.form.getFieldValue(t)&&this.props.form.resetFields([t]),"none"):"block"},t.prototype.preview=function(){var e=this.props.form.getFieldValue("content"),t=this.props.form.getFieldValue("title");e&&E.default.info({title:t||"\u8bdd\u9898",width:1e3,maskClosable:!0,content:S.default.createElement("div",null,e.split("\n").map(function(e){if(new RegExp(/{{.*?}}/).test(e)){var t={};e.replace(/\{|\}/g,"").split(",").map(function(e){t[e.split(":")[0]]=e.split(":")[1]});var l=Number(t.size&&t.size.split("-")[0]||600),a=Number(t.size&&t.size.split("-")[1]||800);return t.url=decodeURIComponent(t.url)+"?imageView/2/w/"+l+"/h/"+a,S.default.createElement("img",{style:{maxWidth:"100%"},src:t.url})}return S.default.createElement("div",null,e)}))})},t.prototype.componentWillReceiveProps=function(e){e.posts.addPost.postId&&this.props.form.resetFields(),e.posts.addPost._id&&!this.state.block&&(this.state={block:e.posts.addPost.block||"ramble"})},t.prototype.componentWillMount=function(){var e=this.props,t=e.dispatch,l=e.params;l.postId&&t({type:"posts/getPost",payload:{postId:l.postId,type:"edit"}})},t.prototype.render=function(){var e=this,t={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:10}}},l={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},a={name:"postfile",action:B.default.url+"posts/image/upload",showUploadList:!1,headers:{Authorization:R.accountCache.get()?R.accountCache.get().token:null},onChange:function(t){var l=e;if("done"===t.file.status){var a=t.file.response.url,o=new Image;o.src=a,o.onload=function(){var e="{{type:image,url:"+encodeURIComponent(a)+",size:"+this.width+"-"+this.height+"}}",t=l.props.form;t.setFieldsValue({content:(t.getFieldValue("content")||"")+"\n"+e})}}}},o=this.props.form.getFieldDecorator,n=this.props.posts.addPost,r=this.props.location.query,i=r.block,s=r.book;return console.log(i,s),S.default.createElement("div",{className:"content-inner"},S.default.createElement("div",{style:{display:n.postId?"block":"none"},className:F.default.addPostTip},"\u5df2\u6dfb\u52a0\u8bdd\u9898",S.default.createElement("a",{href:"#/posts/"+n.postId},n.title)),S.default.createElement(H.default,{onSubmit:this.submit.bind(this)},S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u677f\u5757"}),o("block",{initialValue:n.block||i||"ramble"})(S.default.createElement(w.default.Group,{disabled:!!s,options:this.blockOptions,onChange:this.blockChange.bind(this)}))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u5b9a\u65f6\u53d1\u9001",style:{display:n._id?"none":"block"}}),o("scheduleTime")(S.default.createElement(y.default,{style:{width:"170px"},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"Select Time"})),o("schedule")(S.default.createElement(v.default,{style:{marginLeft:"10px"}}))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u4f5c\u8005ID"}),o("author",{initialValue:n.author&&n.author._id})(S.default.createElement(h.default,null))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u6807\u9898"}),o("title",{initialValue:n.title})(S.default.createElement(h.default,null))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u4e66\u7c4dID",style:{display:s?"block":this.showInBlocks(["book","review"],"book")}}),o("book",{initialValue:n.book&&n.book._id||s||""})(S.default.createElement(h.default,{disabled:!!s}))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u6e38\u620fID",style:{display:this.showInBlocks(["game"],"game")}}),o("game",{initialValue:n.game&&n.game._id})(S.default.createElement(h.default,null))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u4e66\u8bc4\u8bc4\u5206",style:{display:this.showInBlocks(["review"],"rating")}}),o("rating",{initialValue:n.rating})(S.default.createElement(c.default,null))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u5185\u5bb9"}),o("content",{initialValue:n.content})(S.default.createElement(h.default,{type:"textarea",rows:6})),S.default.createElement("div",{style:{display:["review","book","game"].indexOf(this.state.block)!==-1?"none":"block"}},S.default.createElement(u.default,a,S.default.createElement(f.default,null,"\u4e0a\u4f20\u56fe\u7247")),S.default.createElement(f.default,{onClick:this.preview.bind(this),style:{marginLeft:"5px"}},"\u9884\u89c8"))),S.default.createElement(H.default.Item,(0,_.default)({},t,{label:"\u6295\u7968",style:{display:this.showInBlocks(["ramble","girl","book","android-feedback","ios-feedback"],"votes")}}),o("votes",{initialValue:n.votes&&n.votes.map(function(e){return e.content}).join("\n")})(S.default.createElement(h.default,{type:"textarea",rows:6,placeholder:"\u53ea\u6709\u6295\u7968\u8bdd\u9898\u9700\u8981\u586b\uff0c\u6bcf\u9879\u4e00\u884c"}))),S.default.createElement(H.default.Item,l,S.default.createElement(f.default,{type:"primary",htmlType:"submit",size:"large"},n._id?"\u66f4\u65b0":"\u6dfb\u52a0"),S.default.createElement(f.default,{style:{display:n._id?"none":"inline-block"},size:"large",onClick:function(){return e.props.form.resetFields()}},"\u6e05\u7a7a"))))},t}(S.default.Component))||r)||r);t.default=A,e.exports=t.default},740:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=l(4),n=a(o),r=l(13),i=a(r),u=l(6),s=a(u),f=l(5),d=a(f),c=l(1),p=a(c),h=l(2),m=a(h),v=l(1281),b=a(v),y=l(58),g=a(y),_=function(e){function t(){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return p.default.createElement(b.default,this.props)}}]),t}(p.default.Component);t.default=_,_.propTypes={prefixCls:m.default.string,character:m.default.node},_.defaultProps={prefixCls:"ant-rate",character:p.default.createElement(g.default,{type:"star"})},e.exports=t.default},741:[1437,1131],1131:35,1279:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var l=Object.getOwnPropertyNames(t),a=0;a<l.length;a++){var o=l[a],n=Object.getOwnPropertyDescriptor(t,o);n&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}function u(){}Object.defineProperty(t,"__esModule",{value:!0});var s=l(1),f=a(s),d=l(51),c=a(d),p=l(2),h=a(p),m=l(15),v=a(m),b=l(1282),y=l(1280),g=a(y),_=function(e){function t(l){n(this,t);var a=r(this,e.call(this,l));k.call(a);var o=l.value;return void 0===o&&(o=l.defaultValue),a.state={value:o},a}return i(t,e),t.prototype.componentWillReceiveProps=function(e){if("value"in e){var t=e.value;void 0===t&&(t=e.defaultValue),this.setState({value:t})}},t.prototype.getStarDOM=function(e){return c.default.findDOMNode(this.refs["star_"+e])},t.prototype.getStarValue=function(e,t){var l=e+1;if(this.props.allowHalf){var a=(0,b.getOffsetLeft)(this.getStarDOM(0)),o=(0,b.getOffsetLeft)(this.getStarDOM(1))-a;t-a-o*e<o/2&&(l-=.5)}return l},t.prototype.render=function(){for(var e=this.props,t=e.count,l=e.allowHalf,a=e.style,o=e.prefixCls,n=e.disabled,r=e.className,i=e.character,u=this.state,s=u.value,d=u.hoverValue,c=[],p=n?o+"-disabled":"",h=0;h<t;h++)c.push(f.default.createElement(g.default,{ref:"star_"+h,index:h,disabled:n,prefixCls:o+"-star",allowHalf:l,value:void 0===d?s:d,onClick:this.onClick,onHover:this.onHover,key:h,character:i}));return f.default.createElement("ul",{className:(0,v.default)(o,p,r),style:a,onMouseLeave:n?null:this.onMouseLeave},c)},t}(f.default.Component);_.propTypes={disabled:h.default.bool,value:h.default.number,defaultValue:h.default.number,count:h.default.number,allowHalf:h.default.bool,style:h.default.object,prefixCls:h.default.string,onChange:h.default.func,onHoverChange:h.default.func,className:h.default.string,character:h.default.node},_.defaultProps={defaultValue:0,count:5,allowHalf:!1,style:{},prefixCls:"rc-rate",onChange:u,character:"\u2605",onHoverChange:u};var k=function(){var e=this;this.onHover=function(t,l){var a=e.getStarValue(l,t.pageX);e.setState({hoverValue:a}),e.props.onHoverChange(a)},this.onMouseLeave=function(){e.setState({hoverValue:void 0}),e.props.onHoverChange(void 0)},this.onClick=function(t,l){var a=e.getStarValue(l,t.pageX);"value"in e.props||e.setState({value:a}),e.onMouseLeave(),e.props.onChange(a)}};t.default=_,e.exports=t.default},1280:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var l=Object.getOwnPropertyNames(t),a=0;a<l.length;a++){var o=l[a],n=Object.getOwnPropertyDescriptor(t,o);n&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n)}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var u=l(1),s=a(u),f=l(2),d=a(f),c=function(e){function t(){var l,a,o;n(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return l=a=r(this,e.call.apply(e,[this].concat(u))),a.onHover=function(e){var t=a.props,l=t.onHover,o=t.index;l(e,o)},a.onClick=function(e){var t=a.props,l=t.onClick,o=t.index;l(e,o)},o=l,r(a,o)}return i(t,e),t.prototype.getClassName=function(){var e=this.props,t=e.prefixCls,l=e.index,a=e.value,o=e.allowHalf,n=l+1;return o&&a+.5===n?t+" "+t+"-half "+t+"-active":n<=a?t+" "+t+"-full":t+" "+t+"-zero"},t.prototype.render=function(){var e=this.onHover,t=this.onClick,l=this.props,a=l.disabled,o=l.prefixCls,n=l.character;return s.default.createElement("li",{className:this.getClassName(),onClick:a?null:t,onMouseMove:a?null:e},s.default.createElement("div",{className:o+"-first"},n),s.default.createElement("div",{className:o+"-second"},n))},t}(s.default.Component);c.propTypes={value:d.default.number,index:d.default.number,prefixCls:d.default.string,allowHalf:d.default.bool,disabled:d.default.bool,onHover:d.default.func,onClick:d.default.func,character:d.default.node},t.default=c,e.exports=t.default},1281:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=l(1279),n=a(o);t.default=n.default,e.exports=t.default},1282:function(e,t){"use strict";function l(e,t){var l=t?e.pageYOffset:e.pageXOffset,a=t?"scrollTop":"scrollLeft";if("number"!=typeof l){var o=e.document;l=o.documentElement[a],"number"!=typeof l&&(l=o.body[a])}return l}function a(e){var t=void 0,l=void 0,a=void 0,o=e.ownerDocument,n=o.body,r=o&&o.documentElement;return t=e.getBoundingClientRect(),l=t.left,a=t.top,l-=r.clientLeft||n.clientLeft||0,a-=r.clientTop||n.clientTop||0,{left:l,top:a}}function o(e){var t=a(e),o=e.ownerDocument,n=o.defaultView||o.parentWindow;return t.left+=l(n),t.left}Object.defineProperty(t,"__esModule",{value:!0}),t.getOffsetLeft=o}});