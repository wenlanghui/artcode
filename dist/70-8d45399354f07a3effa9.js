webpackJsonp([70],{786:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=(a(17),a(19)),r=n(l),o=(a(93),a(92)),u=n(o),i=(a(11),a(10)),d=n(i),s=a(56),f=n(s),c=a(3),p=n(c),h=a(4),m=n(h),g=a(6),v=n(g),k=a(5),y=n(k),b=a(1),C=n(b),E=a(2),I=(n(E),function(e){function t(){(0,m.default)(this,t);for(var a=arguments.length,n=Array(a),l=0;l<a;l++)n[l]=arguments[l];var r=(0,v.default)(this,e.call.apply(e,[this].concat(n)));return r.state={books:[]},r}return(0,y.default)(t,e),t.prototype.componentWillReceiveProps=function(e){if("value"in e){var t=e.value,a=t.map(function(e){return(0,p.default)({},e,{key:Math.random()})});this.setState({books:a})}},t.prototype.handleAdd=function(){var e={book:"",sort:"",key:Math.random()};this.setState({books:[].concat((0,f.default)(this.state.books),[e])})},t.prototype.onDelete=function(e){var t=[].concat((0,f.default)(this.state.books));t.splice(e,1),this.setState({books:t}),this.triggerChange(t)},t.prototype.triggerChange=function(e){var t=this.props.onChange;if(t){var a=e.map(function(e){return{book:e.book,sort:Number(e.sort)}});t(a)}},t.prototype.cellChange=function(e,t,a){var n=[].concat((0,f.default)(this.state.books));n[a][t]=e,n[a].book&&n[a].sort&&this.triggerChange(n)},t.prototype.render=function(){var e=this,t=[{title:"\u4e66\u7c4did",dataIndex:"book",render:function(t,a,n){return C.default.createElement(x,{onChange:function(t){return e.cellChange(t,"book",n)},value:a.book})}},{title:"\u6392\u5e8f",dataIndex:"sort",width:100,render:function(t,a,n){return C.default.createElement(x,{onChange:function(t){return e.cellChange(t,"sort",n)},value:a.sort})}},{title:"\u64cd\u4f5c",render:function(t,a,n){return C.default.createElement("a",{onClick:function(){return e.onDelete(n)}},"\u5220\u9664")}}];return C.default.createElement("div",null,C.default.createElement(d.default,{onClick:this.handleAdd.bind(this)},"Add"),C.default.createElement(u.default,{size:"small",dataSource:this.state.books,rowKey:function(e){return e.key},columns:t,pagination:!1}))},t}(C.default.Component));t.default=I;var x=function(e){function t(){var a,n,l;(0,m.default)(this,t);for(var r=arguments.length,o=Array(r),u=0;u<r;u++)o[u]=arguments[u];return a=n=(0,v.default)(this,e.call.apply(e,[this].concat(o))),n.state={value:n.props.value},l=a,(0,v.default)(n,l)}return(0,y.default)(t,e),t.prototype.handleChange=function(e){this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e.target.value)},t.prototype.render=function(){return C.default.createElement(r.default,{value:this.state.value,onChange:this.handleChange.bind(this)})},t}(C.default.Component);e.exports=t.default},860:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,r,o,u=(a(11),a(10)),i=n(u),d=a(3),s=n(d),f=(a(17),a(19)),c=n(f),p=a(4),h=n(p),m=a(6),g=n(m),v=a(5),k=n(v),y=(a(25),a(24)),b=n(y),C=a(1),E=n(C),I=a(2),x=(n(I),a(16)),_=a(786),M=n(_),S=a(75),A=(l=(0,x.connect)(function(e){var t=e.ranking,a=e.loading;return{ranking:t,loading:a.models.ranking}}),r=b.default.create(),l(o=r(o=function(e){function t(){(0,h.default)(this,t);for(var a=arguments.length,n=Array(a),l=0;l<a;l++)n[l]=arguments[l];return(0,g.default)(this,e.call.apply(e,[this].concat(n)))}return(0,k.default)(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.dispatch,a=e.params,n=a.rankingId||"";t({type:"ranking/getRanking",payload:{rankingId:n}})},t.prototype.updateRanking=function(e){e.preventDefault();var t=this.props,a=t.dispatch,n=t.form,l=t.params;n.validateFields(function(e,t){e||a({type:"ranking/updateRanking",payload:{rankingId:l.rankingId,body:t,onSuccess:function(){a(S.routerRedux.push({pathname:"/activities/ranking"}))}}})})},t.prototype.render=function(){var e={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},t=this.props.form.getFieldDecorator,a=this.props.ranking.detail;return E.default.createElement("div",{className:"content-inner"},E.default.createElement(b.default,{onSubmit:this.updateRanking.bind(this)},E.default.createElement(b.default.Item,(0,s.default)({},e,{label:"\u540d\u79f0"}),t("title",{initialValue:a.title||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01"}]})(E.default.createElement(c.default,null))),E.default.createElement(b.default.Item,(0,s.default)({},e,{label:"\u77ed\u540d\u79f0"}),t("shortTitle",{initialValue:a.shortTitle||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u77ed\u540d\u79f0\uff01"}]})(E.default.createElement(c.default,null))),E.default.createElement(b.default.Item,(0,s.default)({},e,{label:"\u6807\u7b7e"}),t("tag",{initialValue:a.tag||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u77ed\u540d\u79f0\uff01"}]})(E.default.createElement(c.default,{disabled:!0}))),E.default.createElement(b.default.Item,(0,s.default)({},e,{label:"\u6392\u5e8f\u6743\u91cd"}),t("priority",{initialValue:a.priority||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6392\u5e8f\u6743\u91cd\uff01"}]})(E.default.createElement(c.default,null))),E.default.createElement(b.default.Item,(0,s.default)({},e,{label:"\u64cd\u7eb5\u4e66\u7c4d"}),t("operateBooks",{initialValue:a.operateBooks||[]})(E.default.createElement(M.default,null))),E.default.createElement(b.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},E.default.createElement(i.default,{type:"primary",htmlType:"submit",size:"large"},"\u7f16\u8f91"))))},t}(E.default.Component))||o)||o);t.default=A,e.exports=t.default}});