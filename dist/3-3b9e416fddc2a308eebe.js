webpackJsonp([3],{566:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i,u,d=(a(70),a(69)),r=l(d),s=(a(50),a(41)),f=l(s),o=(a(297),a(296)),c=l(o),m=(a(11),a(10)),p=l(m),g=(a(128),a(58)),E=l(g),h=(a(45),a(44)),b=l(h),y=a(3),v=l(y),V=(a(17),a(19)),I=l(V),k=a(4),P=l(k),w=a(6),x=l(w),A=a(5),N=l(A),R=(a(25),a(24)),q=l(R),z=a(1),H=l(z),D=a(2),L=(l(D),a(16)),M=a(78),C=l(M),_=a(176),S=a(75),B=a(14),F=l(B),U=(n=(0,L.connect)(function(e){var t=e.recommendApp;return{recommendApp:t}}),i=q.default.create(),n(u=i(u=function(e){function t(){(0,P.default)(this,t);for(var a=arguments.length,l=Array(a),n=0;n<a;n++)l[n]=arguments[n];var i=(0,x.default)(this,e.call.apply(e,[this].concat(l)));return i.id="",i}return(0,N.default)(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.dispatch,a=e.params;this.id=a.id||"",this.id&&t({type:"recommendApp/getAndroid",payload:{id:this.id}})},t.prototype.createAndroid=function(e){var t=this;e.preventDefault();var a=this.props,l=a.dispatch,n=a.form;n.validateFields(function(e,a){if(!e){a.dateRange&&(a.start=a.dateRange[0],a.end=a.dateRange[1],delete a.dateRange),a.icon=a.icon[a.icon.length-1].url||a.icon[a.icon.length-1].response.url,a.icon=a.icon.replace(/http\:\/\/(.*?)\//,"/"),a.icon.indexOf("?imageView")===-1&&(a.icon=a.icon+"?imageView/2/w/100/h/100");var n=a.isHorizontal?480:320,i=a.isHorizontal?320:480;a.screenshots=a.screenshots.map(function(e){var t=e.url||e.response.url;return t=t.replace(/http\:\/\/(.*?)\//,"/").replace(/\?imageView.*$/,""),t+("?imageView/2/w/"+n+"/h/"+i)}),l({type:t.id?"recommendApp/updateAndroid":"recommendApp/createAndroid",payload:{id:t.id,body:a,onSuccess:function(){return l(S.routerRedux.push({pathname:"/recommend-app/android"}))}}})}})},t.prototype.getScreenUpload=function(e){return e&&e.fileList&&0!==e.fileList.length?e.fileList:[]},t.prototype.render=function(){this.id=this.props.params.id;var e={name:"postfile",action:C.default.url+"posts/image/upload",headers:{Authorization:_.accountCache.get()?_.accountCache.get().token:null}},t={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},a=this.props.form.getFieldDecorator,l=this.props.recommendApp.android;return H.default.createElement("div",{className:"content-inner"},H.default.createElement(q.default,{onSubmit:this.createAndroid.bind(this)},H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u540d\u79f0"}),a("name",{initialValue:l.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u5305\u540d"}),a("giftDays",{initialValue:l.packageName})(H.default.createElement(I.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u77ed\u7b80\u4ecb"}),a("intro",{initialValue:l.intro,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u77ed\u7b80\u4ecb\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u957f\u7b80\u4ecb"}),a("longIntro",{initialValue:l.longIntro,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u957f\u7b80\u4ecb\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u94fe\u63a5"}),a("download_link",{initialValue:l.download_link,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u63a5\uff01"}]})(H.default.createElement(I.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u5185\u90e8\u94fe\u63a5"}),a("insideLink",{initialValue:l.insideLink})(H.default.createElement(I.default,null)),H.default.createElement("div",null,"\u683c\u5f0f: \u7c7b\u578b:id \u5982\uff1agame:5513ecf04a26ec3873fa6233"),H.default.createElement("div",null,"\u7c7b\u578b\u53ef\u4e3a game,book,post,booklist,link")),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u6587\u4ef6\u5927\u5c0f"}),a("size",{initialValue:l.size,rules:[{pattern:/\d+(?:\.\d+)? *(kb|mb|gb|tb)/,message:"\u683c\u5f0f\u9519\u8bef\uff01"}]})(H.default.createElement(I.default,null)),H.default.createElement("div",null,"\u683c\u5f0f: 3.5mb, 370kb, 1.27gb")),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u7ecf\u9a8c\u503c"}),a("exp",{initialValue:l.exp||5})(H.default.createElement(b.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u56fe\u6807"}),a("icon",{valuePropName:"fileList",initialValue:l.icon&&[{url:C.default.staticsHost+l.icon,name:"icon",uid:l.icon,status:"done"}],getValueFromEvent:this.getScreenUpload.bind(this),rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u6807\uff01"}]})(H.default.createElement(c.default,e,H.default.createElement(p.default,null,H.default.createElement(E.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u6807")))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u622a\u56fe"}),a("screenshots",{valuePropName:"fileList",initialValue:l.screenshots&&l.screenshots.map(function(e){return{url:C.default.staticsHost+e,uid:e,status:"done"}})||[],getValueFromEvent:this.getScreenUpload.bind(this)})(H.default.createElement(c.default,(0,v.default)({},e,{listType:"picture-card"}),H.default.createElement("div",null,H.default.createElement(E.default,{type:"plus"}),H.default.createElement("div",{className:"ant-upload-text"},"Upload"))))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u622a\u56fe\u65b9\u5411"}),a("isHorizontal",{initialValue:l.isHorizontal,valuePropName:"checked"})(H.default.createElement(f.default,null,"\u6a2a\u5411"))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u6fc0\u6d3b\u8981\u6c42"}),a("activateRequire",{initialValue:l.activateRequire})(H.default.createElement(I.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u8d60\u9001\u5929\u6570"}),a("giftDays",{initialValue:l.giftDays||0})(H.default.createElement(b.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u65f6\u95f4\u8303\u56f4"}),a("dateRange",{initialValue:[(0,F.default)(l.start),(0,F.default)(l.end)],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4\uff01"}]})(H.default.createElement(r.default.RangePicker,{showTime:!0,format:"YYYY-MM-DD HH:mm",placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u9875\u5c3e"}),a("settings.randomEnabled",{valuePropName:"checked",initialValue:l.settings&&l.settings.randomEnabled})(H.default.createElement(f.default,null)),a("settings.readerMenuPriority",{initialValue:l.settings&&l.settings.readerMenuPriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u5e94\u7528\u5899"}),a("settings.wallEnabled",{valuePropName:"checked",initialValue:l.settings&&l.settings.wallEnabled})(H.default.createElement(f.default,null)),a("settings.wallPriority",{initialValue:l.settings&&l.settings.wallPriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u6e38\u620f\u4e2d\u5fc3"}),a("settings.gameEnabled",{valuePropName:"checked",initialValue:l.settings&&l.settings.gameEnabled})(H.default.createElement(f.default,null)),a("settings.gamePriority",{initialValue:l.settings&&l.settings.gamePriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(q.default.Item,(0,v.default)({},t,{label:"\u795e\u79d8\u76d2\u5b50"}),a("settings.mysteryBoxEnabled",{valuePropName:"checked",initialValue:l.settings&&l.settings.mysteryBoxEnabled})(H.default.createElement(f.default,null)),a("settings.mysteryBoxPriority",{initialValue:l.settings&&l.settings.mysteryBoxPriority||5e3})(H.default.createElement(b.default,null))),H.default.createElement(q.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},H.default.createElement(p.default,{type:"primary",htmlType:"submit",size:"large"},"\u63d0\u4ea4"))))},t}(H.default.Component))||u)||u);t.default=U,e.exports=t.default}});